#:set nr_buffer dp(1)
#:set table_bottom_buffer dp(20)
<Toolbar>
  title: "What Sticks"
  size_hint: (1, 0.1)
  pos_hint:{"y":.9}
  elevation:19

<ParentScreen1>
  email:email
  password:password
  # canvas.before:
  #   Color:
  #     rgba: 127/255,160/255,189/255,1 #light blue
  #   Rectangle:
  #     # index:0
  #     pos: self.pos
  #     size: self.size
  BoxLayout:
    orientation: 'vertical'
    # MDLabel:
    #   size_hint_y:.2
    MDLabel:
      text:'Dev Note: window size is ' +str(Window.size)
      pos_hint: {"x":0.0}
      size_hint_y: .5
      height: 40
    MDLabel:
      text:"What Sticks"
      font_size: 50
      pos_hint: {"x":0.2}
      size_hint_y: None
      height: 140
    MDTextField:
      id: email
      hint_text: "Email"
      text: "nickapeed@yahoo.com"
      icon_right: "email"
      icon_right_color:.2,.2,.2,1#works
      current_hint_text_color:.2,.2,.2,1#works label changes color
      text_color: 0,0,0,1#works text color
      size_hint_x: None
      width: 400
      font_size: 30
      pos_hint: {"center_x":0.5}
    MDTextField:
      id: password
      hint_text: "Password"
      text: "test"
      icon_right: "password"
      icon_right_color:.2,.2,.2,1#works
      current_hint_text_color:.2,.2,.2,1#works label changes color
      text_color: 0,0,0,1#works text color
      # selection_color: 0, 0, 0, 1
      line_color_focus:0,0,0,1
      line_color_normal:0,0,0,1
      size_hint_x: None
      width: 400
      font_size: 40
      pos_hint: {"center_x":0.5}
      password: True
    BoxLayout:
      padding: (0,100)
      Label:
      BoxLayout:
        orientation:'vertical'
        MDFillRoundFlatButton:
          md_bg_color: 0,0,0,1
          text:'Login'
          size_hint_x: 1
          on_press:
            root.login_button()
        Label:
          size_hint_y: None
          height: 40
        MDFillRoundFlatButton:
          md_bg_color: .3,.3,.3,1
          text:'Exit'
          width: 50
          size_hint_x: None
          on_press:
            app.get_running_app().stop()
      Label:
        size_hint_x: .6

<ActivityScreen>
  email_label:email_label
  title: title
  note:note
  time_thing:time_thing
  date_thing:date_thing
  FloatLayout:
    Label:
      text: 'Add Activity Window'
      size_hint: None,None
      pos_hint:{'x':.23,'y':.7}#{"x","y","top","bottom","left","right"}
      font_size: 24

    Label:
      id: email_label
      size_hint: None,None
      pos_hint:{'x':.23,'y':.64}
      font_size: 20


    MDTextField:
      id: title
      hint_text: "Activity Title"
      mode: "rectangle"
      size_hint: .75,.1
      pos_hint:{'x':.1,'y':.58}
      current_hint_text_color:.2,.2,.2,1#works label changes color
      text_color: 0,0,0,1#works text color
      #line_color_focus: 1, 1, 1, 1
      #foreground_color:1,1,1,1
      #background_color: 1, 1, 1, 1
      #fill_color: 1, 1, 1, .4

    MDTextField:
      id: note
      hint_text: "Activity Note"
      mode: "rectangle"
      size_hint: .75,.25
      pos_hint:{'x':.1,'y':.29}
      current_hint_text_color:.2,.2,.2,1#works label changes color
      text_color: 0,0,0,1#works text color

    #Time

    TextInput:
      id: date_thing
      pos_hint:{'x':.2,'y':.2}
      size_hint: .3,.04
      border: (0,0,0,0)
      padding: (2,0,0,0)
      halign:"left"

    TextInput:
      id: time_thing
      pos_hint:{'x':.57,'y':.2}
      size_hint: .23,.04
      border: (0,0,0,0)
      padding: (0,0,2,0)
      halign:"right"

    MDFillRoundFlatButton:
      md_bg_color: 0,0,0,1
      text: "Log Activity"
      font_size: 12
      pos_hint: {"x": 0.6,'y':.07}
      on_press: root.log_activity()


<TableScreen>
  # BiggerBox(added in python)

# <BiggerBox@BoxLayout>
<BiggerBox>
  padding:'10dp'
  pos_hint:{'top':.90}
  size_hint:(1,.9)
  # RelativeLayout:(RelativeLayout01:)
  #   BigBox:

# <BigBox@BoxLayout>
<BigBox>
  orientation:'vertical'
  spacing:3
  # RelativeLayout:(RelativeLayout02)(Add this in TableScreen py)
<RelativeLayout02>
  size_hint:(1,.1)
  canvas.before:
    Color:
      rgba: 150/255, 150/255, 150/255, 1
    Rectangle:
      size:self.size
    Color:
      rgb: 0,0,0
    Line:
      points:(0+nr_buffer,0+nr_buffer,0+nr_buffer,self.height-nr_buffer,self.width-nr_buffer,self.height-nr_buffer,self.width-nr_buffer,0+nr_buffer,0+nr_buffer,0+nr_buffer)
      width:3

#****Save
<ScrollViewForTable>
  canvas.before:
    Color:
      rgba: 100/255, 100/255, 100/255, 1
    Rectangle:
      size:self.size


<TableData>
  cols:3
  size_hint: 1,None
  height: self.minimum_height+table_bottom_buffer

#****End Save

<HeadingBox>
  date_btn_sort:date_btn_sort
  act_btn_sort:act_btn_sort
  # __safe_id: [grid_drop.__self__]
  # grid_drop:grid_drop
  padding:dp(3),dp(2)
  BoxLayout:
    orientation:'vertical'
    Label:
      text:'Date and Time'
      color: 0,0,0,1#black
    Button:
      id:date_btn_sort
      text:'sort'
      size_hint:(1,.9)
      on_press:root.date_sort_btn()
  BoxLayout:
    orientation:'vertical'
    Label:
      text:'Activity Logged'
      color: 0,0,0,1#black
    Button:
      id:act_btn_sort
      text:'sort'
      size_hint:(1,.9)
      on_press:root.act_sort_btn()
  RelativeLayout:
    size_hint_x:.7

    GridDropDown
      id: grid_drop
      size_hint:None,None
      size:(self.parent.width,self.parent.height)


<GridDropDown>
  # trick to not lost the Dropdown instance
  # Dropdown itself is not really made to be used in kv.
  #avoid weak reference issue
  __safe_id: [btn1.__self__]
  __safe_id: [btn2.__self__]
  Button:
    id:btn_drop
    text:'Show Entries'
    on_parent: drop_content.dismiss()
    on_release: drop_content.open(self)
    size_hint:None,None
    size:(self.parent.width,self.parent.height)
  DropDown:
    id:drop_content
    on_select: btn_drop.text = '{}'.format(args[1])
    Button:
      id:btn1
      text: 'Last 20 Entries'
      size_hint_y: None
      height: 44
      on_release:
        drop_content.select(self.text)
        root.last_20_btn()
    Button:
      id:btn2
      text: 'All Entries'
      size_hint_y: None
      height: 44
      on_release:
        drop_content.select(self.text)
        root.all_entries_btn()




<NavMenu>
  spacing:10
  padding:(0,600)
  OneLineListItem:
    text:"Add Activity"
    on_release: root.nav_to_activity()

  OneLineListItem:
    text:"View Logged Activties"
    on_release: root.nav_to_table()

  OneLineListItem:
    text:"About What Sticks"
    on_release: root.go_to_webiste()

  OneLineListItem:
    text:"Log Out"
    on_release:
      root.app.psm.current="ps1"

#
# <AreYouSureBox>
#   size:(400,300)
#   size_hint:(None, None)
#   pos_hint:{'x':.2,'y':.29}
#   canvas.before:
#     Color:
#       rgba: .7,.7,.7,1
#     RoundedRectangle:
#       size: self.size
#       pos: self.pos
#   orientation: 'vertical'
#   MDLabel:
#     text:'Are you sure you want to delete activity?'
#     pos_hint: {"x":0.2}
#     font_size:30
#   BoxLayout:
#     Button:
#       background_color: .22,1,.078,1
#
#       size_hint_x:.8
#       pos_hint:{'center_x':.5}
#       text: 'Yes, Delete'
#       # on_release: root.parent.remove_widget(root)
#       on_press: root.yes_button()
#     Button:
#       background_color: .22,1,.078,1
#
#       size_hint_x:.8
#       pos_hint:{'center_x':.5}
#       text: 'No'
#       # on_release: root.parent.remove_widget(root)
#       on_press: root.no_button()
#   MDLabel:
#     size_hint_x:.01

<ConfirmBox>
  size:(400,300)
  size_hint:(None, None)
  pos_hint:{'x':.2,'y':.29}
  canvas.before:
    Color:
      rgba: .7,.7,.7,1
    RoundedRectangle:
      size: self.size
      pos: self.pos
  orientation: 'vertical'
  MDLabel:
    text:'Activity Logged'
    pos_hint: {"x":0.2}
    font_size:30
  Button:
    background_color: .22,1,.078,1

    size_hint_x:.8
    pos_hint:{'center_x':.5}
    text: 'Close'
    # on_release: root.parent.remove_widget(root)
    on_press: root.ok_button()
  MDLabel:
    size_hint_x:.01

<FailBox>
  size:(400,300)
  size_hint:(None, None)
  pos_hint:{'x':.2,'y':.29}
  canvas.before:
    Color:
      rgba: .7,.7,.7,1
    RoundedRectangle:
      size: self.size
      pos: self.pos
  orientation: 'vertical'
  MDLabel:
    text:'Activity NOT Logged'
    pos_hint: {"x":0.2}
    font_size:30
  Button:
    background_color:.9,0,0,1
    size_hint_x:.8
    pos_hint:{'center_x':.5}
    text: 'Close'
    on_release: root.parent.remove_widget(root)
  MDLabel:
    size_hint_x:.01
